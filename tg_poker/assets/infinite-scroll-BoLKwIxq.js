import{a as e}from"./attach-properties-to-component-CClyKAqJ.js";import{r as t,o as n,D as r,F as i,h as o,R as a,n as l,l as c}from"./index-sT5wyuMN.js";import{m as u,w as s,a as f}from"./with-default-props-YTkVgPz6.js";import{c as d,g as m}from"./phaser-BsKGbp7r.js";import{a as v,u as h}from"./index-3t5yCYFN.js";import{g as p}from"./get-scroll-parent-CbYlqSdh.js";import{D as g}from"./dot-loading-Clmf9eMD.js";var y=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},E="object"==typeof d&&d&&d.Object===Object&&d,w="object"==typeof self&&self&&self.Object===Object&&self,b=E||w||Function("return this")(),j=b,x=/\s/,N=/^\s+/,O=b.Symbol,$=O,R=Object.prototype,C=R.hasOwnProperty,L=R.toString,S=$?$.toStringTag:void 0,T=Object.prototype.toString,k=function(e){var t=C.call(e,S),n=e[S];try{e[S]=void 0;var r=!0}catch(o){}var i=L.call(e);return r&&(t?e[S]=n:delete e[S]),i},M=O?O.toStringTag:void 0,F=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":M&&M in Object(e)?k(e):function(e){return T.call(e)}(e)},I=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&x.test(e.charAt(t)););return t}(e)+1).replace(N,""):e},B=y,W=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,A=/^0o[0-7]+$/i,H=parseInt,P=y,z=function(){return j.Date.now()},U=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==F(e)}(e))return NaN;if(B(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=B(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=I(e);var n=D.test(e);return n||A.test(e)?H(e.slice(2),n?2:8):W.test(e)?NaN:+e},X=Math.max,Z=Math.min,q=y;const G=m((function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return q(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(e,t,n){var r,i,o,a,l,c,u=0,s=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function v(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-u>=o}function h(){var e=z();if(v(e))return p(e);l=setTimeout(h,function(e){var n=t-(e-c);return f?Z(n,o-(e-u)):n}(e))}function p(e){return l=void 0,d&&r?m(e):(r=i=void 0,a)}function g(){var e=z(),n=v(e);if(r=arguments,i=this,c=e,n){if(void 0===l)return function(e){return u=e,l=setTimeout(h,t),s?m(e):a}(c);if(f)return clearTimeout(l),l=setTimeout(h,t),m(c)}return void 0===l&&(l=setTimeout(h,t)),a}return t=U(t)||0,P(n)&&(s=!!n.leading,o=(f="maxWait"in n)?X(U(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),g.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=c=i=l=void 0},g.flush=function(){return void 0===l?a:p(z())},g}(e,t,{leading:r,maxWait:t,trailing:i})}));function J(e){return t.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),t.createElement("g",{id:"RightOutline-RightOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("g",{id:"RightOutline-RightOutlined"},t.createElement("rect",{id:"RightOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),t.createElement("path",{d:"M17.3947957,5.11219264 L35.5767382,22.6612572 L35.5767382,22.6612572 C36.1304785,23.2125856 36.1630514,24.0863155 35.6744571,24.6755735 L35.5767382,24.7825775 L17.3956061,42.8834676 C17.320643,42.9580998 17.2191697,43 17.1133896,43 L13.9866673,43 C13.7657534,43 13.5866673,42.8209139 13.5866673,42.6 C13.5866673,42.4936115 13.6290496,42.391606 13.7044413,42.316542 L32.3201933,23.7816937 L32.3201933,23.7816937 L13.7237117,5.6866816 C13.5653818,5.53262122 13.5619207,5.27937888 13.7159811,5.121049 C13.7912854,5.04365775 13.8946805,5 14.0026627,5 L17.1170064,5 C17.2206403,5 17.3202292,5.04022164 17.3947957,5.11219264 Z",id:"RightOutline-right",fill:"currentColor",fillRule:"nonzero"}))))}const K="adm-list",Q={mode:"default"},V=t.forwardRef(((e,n)=>{const r=u(Q,e),i=t.useRef(null);return t.useImperativeHandle(n,(()=>({get nativeElement(){return i.current}}))),s(r,a.createElement("div",{className:l(K,`${K}-${r.mode}`),ref:i},r.header&&a.createElement("div",{className:`${K}-header`},r.header),a.createElement("div",{className:`${K}-body`},a.createElement("div",{className:`${K}-body-inner`},r.children))))}));function Y(e){return null!=e&&!1!==e}const _="adm-list-item",ee=e(V,{Item:e=>{var t,n;const{arrow:r,arrowIcon:i}=e,{list:o={}}=c(),u=null!==(t=e.clickable)&&void 0!==t?t:!!e.onClick,d=null!==(n=null!=r?r:i)&&void 0!==n?n:u,m=f(o.arrowIcon,!0!==r?r:null,!0!==i?i:null),v=a.createElement("div",{className:`${_}-content`},Y(e.prefix)&&a.createElement("div",{className:`${_}-content-prefix`},e.prefix),a.createElement("div",{className:`${_}-content-main`},Y(e.title)&&a.createElement("div",{className:`${_}-title`},e.title),e.children,Y(e.description)&&a.createElement("div",{className:`${_}-description`},e.description)),Y(e.extra)&&a.createElement("div",{className:`${_}-content-extra`},e.extra),d&&a.createElement("div",{className:`${_}-content-arrow`},m||a.createElement(J,null)));return s(e,a.createElement(u?"a":"div",{className:l(`${_}`,u?["adm-plain-anchor"]:[],e.disabled&&`${_}-disabled`),onClick:e.disabled?void 0:e.onClick},v))}}),te="adm-infinite-scroll",ne={threshold:250,children:(e,t,n)=>a.createElement(ie,{hasMore:e,failed:t,retry:n})},re=e=>{const l=u(ne,e),[c,f]=t.useState(!1),d=function(e){var a=this,l=t.useRef(!1);return t.useCallback((function(){for(var t=[],c=0;c<arguments.length;c++)t[c]=arguments[c];return n(a,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:if(l.current)return[2];l.current=!0,n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,e.apply(void 0,i([],o(t),!1))];case 2:return[2,n.sent()];case 3:throw n.sent();case 4:return l.current=!1,[7];case 5:return[2]}}))}))}),[e])}((e=>n(void 0,void 0,void 0,(function*(){try{yield l.loadMore(e)}catch(t){throw f(!0),t}})))),m=t.useRef(null),[g,y]=t.useState({}),E=t.useRef(g),[w,b]=t.useState(),{run:j}=(x={wait:100,leading:!0,trailing:!0},O=v((()=>n(void 0,void 0,void 0,(function*(){if(E.current!==g)return;if(!l.hasMore)return;const e=m.current;if(!e)return;if(!e.offsetParent)return;const t=p(e);if(b(t),!t)return;const n=e.getBoundingClientRect().top,r=function(e){return e===window}(t)?window.innerHeight:t.getBoundingClientRect().bottom;if(r>=n-l.threshold){const e={};E.current=e;try{yield d(!1),y(e)}catch(i){}}})))),$=null!==(N=null==x?void 0:x.wait)&&void 0!==N?N:1e3,R=t.useMemo((function(){return G((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return O.current.apply(O,i([],o(e),!1))}),$,x)}),[]),h((function(){R.cancel()})),{run:R,cancel:R.cancel,flush:R.flush});var x,N,O,$,R;return t.useEffect((()=>{j()})),t.useEffect((()=>{if(m.current&&w)return w.addEventListener("scroll",e),()=>{w.removeEventListener("scroll",e)};function e(){j()}}),[w]),s(l,a.createElement("div",{className:te,ref:m},"function"==typeof l.children?l.children(l.hasMore,c,(function(){return n(this,void 0,void 0,(function*(){f(!1);try{yield d(!0),y(E.current)}catch(e){}}))})):l.children))},ie=e=>{const{locale:t}=c();return e.hasMore?e.failed?a.createElement("span",null,a.createElement("span",{className:`${te}-failed-text`},t.InfiniteScroll.failedToLoad),a.createElement("a",{onClick:()=>{e.retry()}},t.InfiniteScroll.retry)):a.createElement(a.Fragment,null,a.createElement("span",null,t.common.loading),a.createElement(g,null)):a.createElement("span",null,t.InfiniteScroll.noMore)};export{re as I,ee as L};
